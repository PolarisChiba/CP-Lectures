# 分治優化

## 例題

:::info
https://cses.fi/problemset/task/2087
有 $N$ 個房子，第 $i$ 個在座標 $i$ 的地方。
第 $i$ 間房子有 $p_i$ 個學生。
現在要選 $k$ 個房子的所在處建立學校。
請問建完後，所有學生要上學要走的路徑長總和最小是多少。
$N, k\le 10^3$、$p_i\le 10^9$
:::

:::info
https://www.csie.ntu.edu.tw/~b07902024/dp-lecture.pdf
有 $N$ 個位於一維數線上的餐廳，由左至右編為 $1$ 到 $N$ 號，其中 $i$ 號餐廳與 $i - 1$ 號餐廳的距離為 $A_i$。
你有 $M$ 張餐卷，第 $i$張可以兌換第 $i$ 種食物且只能使用一次。
已知這 $N$ 家餐廳都有販售這 $M$ 種食物，且第 $i$ 家餐廳的第 $j$ 種食物的好吃度為 $B_{i, j}$。
你可以從任意間餐廳開始，請問「吃到食物的好吃度總和 $-$ 總行走距離」的最大值為何。
:::

:::info
（POI2011）
給定長度 $n$ 的序列 $\{a_n\}$。
「對於每個 $i$」，求最小的非負整數 $p$，使得 $\forall j\in [1, n]$ 都有 $a_j \le a_i + p - \sqrt{|i - j|}$。
$1\le n\le 5\times 10^5$、$0\le a_i\le 10^9$
:::

:::info
（JOI 2013 本選 p5）
給一個 permutation，輸出交換哪兩個數字會使逆序數對數量最小
:::

:::info
https://codeforces.com/problemset/problem/1442/D
給定 $n\le 1000$ 個非嚴格遞增數列，元素皆非負，所有數列長度總和 $\le 10^6$。
你可以在每個數列的開頭選一個數字，總共只能選 $K\le 3000$ 個數字。
請最大化選的數字的總和。
:::

:::info
https://codeforces.com/problemset/problem/868/F
給定長度為 $n$ 的數列。子序列的成本是其內相同元素的 pair 數。
請將數列切成恰 $k$ 個子序列，使成本總和最小。
$n\le 10^5$、$k\le 20$
:::

## 其他

:::info
（樹上背包）
$n\le 3000$ 門課，第 $i$ 堂有 $p_i$ 學分，每堂課可能有一門擋修或沒有。
請問至多修 $m\le 3000$ 門課的條件下，最多可以拿多少學分？
:::

:::info
（slope trick）
給定長度為 $n\le 10^5$ 的序列 $a$，元素$\le 10^9$。
每次操作可以任選一個數字加、減一。
請問至少要幾次操作才能讓數列變成非嚴格遞增？
:::

:::info
https://codeforces.com/problemset/problem/1709/F
:::

:::info
（2022 YTP）
公司在接下來 $N$ 天各有一個任務，每個任務有能力區間 $[l_i, r_i]$、懲罰 $t_i$。
對於一個能力值為 $p$ 的人，若 $l_i\le p\le r_i$，則公司不用付錢，但幫手的能力變成 $l_i + r_i - p$。
若在範圍外，則要支付 $t_i$ 元，不過能力值不會改變。
每天都會有一個幫手出現，你可以花 $c_i$ 元請他來幫忙，但舊的幫手就得離開。
請問 $N$ 天過後，公司至少要花多少錢。
$N, l_i, r_i, p\le 10^5$、$c_i, t_i\le 10^9$
:::

:::info
https://cses.fi/problemset/task/2176
請問在 $n\times n$ 的棋盤上有幾種放 $k$ 的主教的方法使其互不攻擊？
$n\le 500$、$k\le n^2$
:::

:::info
給定一個由英文字母組成的字串 $S$（$|S|\le 500$）。
每回合可以選兩個相鄰且相同的字元消掉。
請問有幾種將字串變為空的方法？
:::

:::info
https://cses.fi/problemset/task/1078
$n\times n$ 的棋盤上有 $m$ 的陷阱。
你要從左上角到右下角，只能往右、往下，不能碰到陷阱。
請問有幾種方法達成？
$n\le 10^6$、$m\le 10^3$
:::

:::info
https://cses.fi/problemset/task/1075
請計算有幾種長度為 $n$（$n\le 1000$）的 permutation 使得沒有相鄰數字相差 $1$。
:::